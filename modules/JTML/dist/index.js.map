{"version":3,"sources":["../src/index.js"],"names":["jQuery","require","$","JTML","global","globalThis","DOMAIN","compileNow","compiler","each","tag","cb","tags","children","i","length","$compiler","fun","name","hide","recursion","$compilerDefine","attr","val","$ignoreDict","$ignore","tagName","compile","domain","compileSelf","tmp","localName","tagJq","css","resetDomain","updateCompile","jtml","select","t","sword","define","exports","document","ready"],"mappings":"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","file":"index.js","sourcesContent":["/*!\n\n * JTML Library\n\n * yhzheng - v0.0.1\n\n * https://github.com/qianduanXIAOHAOZI/JTML | Released under MIT license\n\n */\n\nconst jQuery = require(\"./../dependencies/jquery-3.3.1.min.js\");\nconst $ = jQuery;\n\nconst JTML = {};\nconst global = globalThis;\n\n!function (JTML) {\n    JTML.DOMAIN = $(null);\n    JTML.compileNow = true;\n    JTML.compiler = {};\n\n    JTML.each = function (tag, cb) {\n        let tags = tag.children();\n        for (let i = 0; i < tags.length; i++) {\n            if (!cb(tags[i])) JTML.each($(tags[i]), cb);\n        }\n    };\n\n    JTML.compiler.$compiler = function (fun, name = fun.name, hide = true, recursion = true) {\n        JTML.compiler[name] = fun;\n        JTML.compiler[name].hide = hide;\n        JTML.compiler[name].recursion = recursion;\n    };\n    JTML.compiler.$compilerDefine = function (name, attr, val) {\n        JTML.compiler[name][attr] = val;\n    };\n    JTML.compiler.$ignoreDict = {};\n    JTML.compiler.$ignore = function (tagName) {\n        JTML.compiler.$ignoreDict[tagName] = true;\n    };\n\n    JTML.compile = function (domain = JTML.DOMAIN, compileSelf = false) {\n        function tmp(tag) {\n            let compiler = JTML.compiler[tag.localName];\n            if (compiler) {// 存在这个jtml转义器\n                let tagJq = $(tag);\n                if (compiler.hide) tagJq.css(\"display\", \"none\");\n                compiler(tagJq);\n                return compiler.recursion;\n            }\n        }\n        if (compileSelf) {\n            tmp(domain[0]);\n            JTML.each(domain, tmp);\n        } else {\n            JTML.each(domain, tmp);\n        }\n    };\n    JTML.resetDomain = function () {\n        JTML.DOMAIN = $(\"body:first\");\n    };\n    JTML.updateCompile = function () {\n        if (JTML.compileNow) JTML.compile();// 编译domain内容\n        let jtml = $(\"jtml\");\n        for (let i = 0; i < jtml.length; i++) {\n            JTML.compile($(jtml[i]));\n        }\n    };\n    JTML.select = function (t) {\n        this.DOMAIN = $(t);\n    };\n\n    sword.define(\"JTML\", function (exports) {\n        exports(JTML);\n    });\n}(JTML);\n\n$(document).ready(function () {\n    JTML.resetDomain();\n    JTML.updateCompile();\n});"]}